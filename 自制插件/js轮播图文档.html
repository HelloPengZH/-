<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

    <script>
    // 伪数据
    var imgSrc = [
        {"src": "images/bigPicPzh/1.jpg", "discription": "对本图片的描述性说明"},
        {"src": "images/bigPicPzh/2.jpg", "discription": "对本图片的描述性说明"},
        {"src": "images/bigPicPzh/3.jpg", "discription": "对本图片的描述性说明"},
        {"src": "images/bigPicPzh/4.jpg", "discription": "对本图片的描述性说明"},
        {"src": "images/bigPicPzh/5.jpg", "discription": "对本图片的描述性说明"},
    ];
//彭氏油条丝
    var pzh = {
        "each": function (arr, fn) {
            if (arr.length) {
                for (var i = 0; i < arr.length; i++) {
                    fn(i, arr[i])
                }
            } else if (typeof arr === "number") {
                for (var i = 0; i < arr; i++) {
                    fn(i)
                }
            }
        },
        "td":document.getElementsByTagName,
        "te":document.body.getElementsByTagName,
        "id":document.getElementById,
        //变量
        "name": "PengZhengHao"
    }
//    轮播图整体
    var silder = document.querySelector("#silderPzh") || document.getElementById("silderPzh")
//    屏幕
    var screen = silder.querySelector(".screen") || silder.getElementsByClassName("screen")[0]
//    活动结构
    var ul = screen.querySelector("ul") || screen.getElementsByClassName("ul")[0]
//    提示部分
    var ol = screen.querySelector("ol") || screen.getElementsByClassName("ol")[0]
    //  结构
    /*
     //  变量准备
     var li = document.createElement("li")  // 创建一个dom对象li
     //    uli.innerHTML = '<a href="#"><img src="' + imgSrc[imgSrc.length - 1].src + '" alt=""></a>'
     //
     //    ul.appendChild(uli)
     //    console.log(ul);



     for (var i = 0; i < imgSrc.length; i++) {
     //为什么不能对同一对象重复添加????
     var li = document.createElement("li");
     //        li.innerHTML = '<a href="#"><img src="' + imgSrc[i].src + '" alt=""></a>';
     ul.appendChild(li); //追加dom对象li 最近的 li
     }
     console.log(ul);



     //
     //    uli.innerHTML = '<a href="#"><img src="' + imgSrc[0].src + '" alt=""></a>'
     //    ul.appendChild(uli)     */

    var arr=[]    //图片及内容的字符串拼接
    arr.push.apply(arr,imgSrc)
    //  拼接
    for (var i = 0; i < arr.length; i++) {
        arr[i]= '<a href="#"><img src="' + arr[i].src + '" alt=""></a>'
    }
    arr.push(arr[0])
    arr.unshift(arr[arr.length-2])
    //  结构添加到DoM树
    pzh.each(arr, function (index) {
        var li = document.createElement("li")
        li.innerHTML= arr[index]
        ul.appendChild(li)
    })
    pzh.each(imgSrc, function (index) {
        var li = document.createElement("li")
        li.innerHTML= index+1
        ol.appendChild(li)
    })

    // 轮播函数
    var index = 1
    function imgFunc(index,fn) {
        var width = ul.getElementsByTagName("li")[0].offsetWidth
        ul.style.left = - index*width+'px'
        if (fn) {
            fn()
        }
    }
    imgFunc(index)
    var flag=0

    function indexFunc(index,min,max) {
        flag=0
        var num=index
        if (index>=max) {
            flag=1
            num=min
        } else if (index<=min) {
            flag=1
            num==max
        }
        return num;
    }
    function silderFunc() {

        index = indexFunc(index, 1, arr.length - 1)
        if (flag) {
            //c3部分
            ul.style.transition="none"
            //跳转
            imgFunc(index)
        }
        index++
//        var width = ul.getElementsByTagName("li")[0].offsetWidth
        var width = pzh.te.call(ul,"li")[0].offsetWidth
        console.log(width);
        //C3
        ul.style.transition="left .5s"
        ul.style.left= -index * width+'px'
        //动画框架
//        animate(ul,{"left": -index * width}, 1000 / 60);

        /*        index = indexFunc(index, 1, arr.length - 1)
         if (flag) {
         imgFunc(index)
         }*/
        /*    imgFunc(index, function () {
         index=indexFunc(index,1,arr.length-1)
         console.log(index)
         })*/
    }
    window.onclick = function () {
        silderFunc()
    }




</script>
</body>
</html>